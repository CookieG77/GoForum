{{ define "content" }}

{{ if .ComingFromMail }}
    <p>Please enter your new password !</p>
    <form action="/reset-password" method="post">
        <input type="hidden" name="formType" value="submitPassword">
        <input type="hidden" name="token" value="{{ .MailId }}">
        {{ if eq .Error "emptyFields" }}
            <p>Some fields were left empty</p>
        {{ end }}
        {{ if eq .Error "passwordsMismatch" }}
            <p>Passwords do not match</p>
        {{ end }}
        {{ if eq .Error "passwordIncorrect" }}
            <p>Password is too short</p>
        {{ end }}
        <label>
            <input type="password" required name="password" placeholder="Enter your new password here">
        </label>
        <label>
            <input type="password" required name="passwordConfirm" placeholder="Confirm your new password here">
        </label>
        <button type="submit">Change password</button>
        {{ if .Success }}
            <p>Password was changed !</p>
        {{ end }}
    </form>
{{ else }}
    <p>You wish to reset your password ? Please provide the email attached to your account here !</p>
    {{ if eq .Error "noMailProvided" }}
        <p>No email were provided, stop messing with the html page !!!</p>
    {{ end }}
    {{ if eq .Error "linkedToOAuth" }}
        {{ if eq .Provider "google" }}
            <p>It seems that your account is linked to a Google account</p>
        {{ end }}
        {{ if eq .Provider "github" }}
            <p>It seems that your account is linked to a GitHub account</p>
        {{ end }}
        {{ if eq .Provider "discord" }}
            <p>It seems that your account is linked to a Discord account</p>
        {{ end }}
        <p>You cannot reset the password of an account registered with another website</p>
    {{ end }}
    <form action="/reset-password" method="post">
        <input type="hidden" name="formType" value="submitMail">
        <label>
            <input type="email" required name="email" placeholder="Enter your email here">
        </label>
        <button type="submit">Send me a reset link</button>
    </form>
    {{ if .Success }}
        <p>Email was sent !</p>
    {{ end }}
{{ end }}

{{ end }}